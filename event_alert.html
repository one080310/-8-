<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>í•™êµ í–‰ì‚¬ ìº˜ë¦°ë”</title>
<style>
body {
  font-family: Arial, sans-serif;
  padding: 20px;
  background: #f5f7fb;
}

a {
  text-decoration: none;
  color: #4a5bdc;
  font-weight: 600;
  display: inline-block;
  margin-bottom: 15px;
}

h2 {
  margin-bottom: 10px;
  color: #333;
}

/* ì…ë ¥ ì˜ì—­ */
.control {
  margin: 20px 0;
  display: flex;
  gap: 10px;
  align-items: center;
}

.control input {
  padding: 8px;
  border: 1px solid #ddd;
  border-radius: 5px;
  font-size: 14px;
}

.control input[type="date"] {
  width: 150px;
}

.control input[type="text"] {
  flex: 1;
  max-width: 300px;
}

.control button {
  padding: 8px 20px;
  background: #4a5bdc;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-weight: 600;
}

.control button:hover {
  background: #3849c7;
}

/* ìº˜ë¦°ë” ê·¸ë¦¬ë“œ */
.calendar {
  display: grid;
  grid-template-columns: repeat(7, 1fr); /* 7ì—´ (ì¼~í† ) */
  gap: 3px;
  margin-top: 20px;
  max-width: 800px;
  background: white;
  padding: 10px;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}

/* ìš”ì¼ í—¤ë” */
.head {
  background: #4a5bdc;
  color: white;
  text-align: center;
  padding: 12px 0;
  font-weight: bold;
  font-size: 14px;
}

/* ë‚ ì§œ ì¹¸ */
.day {
  border: 1px solid #e0e4ff;
  min-height: 100px;
  padding: 8px;
  box-sizing: border-box;
  background: white;
  border-radius: 5px;
}

/* ë‚ ì§œ ìˆ«ì */
.day-number {
  font-weight: bold;
  margin-bottom: 5px;
  color: #333;
  font-size: 16px;
}

/* í–‰ì‚¬ í•­ëª© */
.event {
  background: #e3f2fd;
  margin-top: 3px;
  padding: 4px 6px;
  font-size: 12px;
  border-radius: 4px;
  border-left: 3px solid #4a5bdc;
  word-break: break-word;
}

/* ì˜¤ëŠ˜ ë‚ ì§œ ê°•ì¡° */
.today {
  border: 2px solid #ff5252;
  background: #fff5f5;
}
</style>
</head>
<body>

<h2>ğŸ“… í•™êµ í–‰ì‚¬ ìº˜ë¦°ë”</h2>
<a href="index.html">â† í™ˆìœ¼ë¡œ</a>

<!-- í–‰ì‚¬ ì¶”ê°€ ì…ë ¥ ì˜ì—­ -->
<div class="control">
  <input type="date" id="eventDate">
  <input type="text" id="eventText" placeholder="í–‰ì‚¬ ë‚´ìš© ì…ë ¥">
  <button onclick="addEvent()">ì¶”ê°€</button>
</div>

<!-- ìº˜ë¦°ë” ê·¸ë¦¬ë“œ -->
<div class="calendar" id="calendar">
  <!-- ìš”ì¼ í—¤ë” -->
  <div class="head">ì¼</div>
  <div class="head">ì›”</div>
  <div class="head">í™”</div>
  <div class="head">ìˆ˜</div>
  <div class="head">ëª©</div>
  <div class="head">ê¸ˆ</div>
  <div class="head">í† </div>
</div>

<script>
/* === ì „ì—­ ë³€ìˆ˜ === */
const calendar = document.getElementById('calendar'); // ìº˜ë¦°ë” ìš”ì†Œ
const today = new Date(); // ì˜¤ëŠ˜ ë‚ ì§œ ê°ì²´
const year = today.getFullYear(); // í˜„ì¬ ì—°ë„
const month = today.getMonth(); // í˜„ì¬ ì›” (0~11)

// ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì—ì„œ í–‰ì‚¬ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (ì—†ìœ¼ë©´ ë¹ˆ ê°ì²´)
let events = JSON.parse(localStorage.getItem("calendarEvents") || "{}");

/* === ë‚ ì§œ í¬ë§· í•¨ìˆ˜ === */
function formatDate(y, m, d) {
  // "2024-12-23" í˜•ì‹ìœ¼ë¡œ ë°˜í™˜
  return `${y}-${String(m).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
}

/* === ìº˜ë¦°ë” ê·¸ë¦¬ê¸° === */
function drawCalendar(){
  const firstDay = new Date(year, month, 1).getDay(); // ì´ë²ˆ ë‹¬ 1ì¼ì˜ ìš”ì¼ (0:ì¼~6:í† )
  const lastDate = new Date(year, month + 1, 0).getDate(); // ì´ë²ˆ ë‹¬ ë§ˆì§€ë§‰ ë‚ ì§œ
  
  // 1ì¼ ì „ê¹Œì§€ ë¹ˆ ì¹¸ ì±„ìš°ê¸°
  for(let i = 0; i < firstDay; i++){
    const emptyDiv = document.createElement("div");
    calendar.appendChild(emptyDiv);
  }
  
  // 1ì¼ë¶€í„° ë§ˆì§€ë§‰ ë‚ ê¹Œì§€ ë‚ ì§œ ì¹¸ ìƒì„±
  for(let d = 1; d <= lastDate; d++){
    const dateKey = formatDate(year, month + 1, d); // ë‚ ì§œ í‚¤ ìƒì„±
    const box = document.createElement("div"); // ë‚ ì§œ ì¹¸ ìƒì„±
    box.className = "day";
    
    // ì˜¤ëŠ˜ ë‚ ì§œ ê°•ì¡°
    const todayKey = formatDate(
      today.getFullYear(),
      today.getMonth() + 1,
      today.getDate()
    );
    if (dateKey === todayKey) {
      box.classList.add("today"); // ì˜¤ëŠ˜ì´ë©´ today í´ë˜ìŠ¤ ì¶”ê°€
    }
    
    // ë‚ ì§œ ìˆ«ì ì¶”ê°€
    box.innerHTML = `<div class="day-number">${d}</div>`;
    
    // í•´ë‹¹ ë‚ ì§œì— ë“±ë¡ëœ í–‰ì‚¬ê°€ ìˆìœ¼ë©´ í‘œì‹œ
    if(events[dateKey]){
      events[dateKey].forEach(e => {
        box.innerHTML += `<div class="event">${e}</div>`;
      });
    }
    
    calendar.appendChild(box);
  }
}

/* === í–‰ì‚¬ ì¶”ê°€ í•¨ìˆ˜ === */
function addEvent(){
  const date = eventDate.value; // ì„ íƒí•œ ë‚ ì§œ
  const text = eventText.value.trim(); // ì…ë ¥í•œ í–‰ì‚¬ ë‚´ìš© (ê³µë°± ì œê±°)
  
  if(!date || !text) {
    alert("ë‚ ì§œì™€ í–‰ì‚¬ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!");
    return;
  }
  
  // í•´ë‹¹ ë‚ ì§œì— í–‰ì‚¬ ë°°ì—´ì´ ì—†ìœ¼ë©´ ìƒì„±
  if(!events[date]) events[date] = [];
  
  // í–‰ì‚¬ ì¶”ê°€
  events[date].push(text);
  
  // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
  localStorage.setItem("calendarEvents", JSON.stringify(events));
  
  // ì…ë ¥ì°½ ì´ˆê¸°í™”
  eventText.value = "";
  
  // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
  location.reload();
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ìº˜ë¦°ë” ê·¸ë¦¬ê¸°
drawCalendar();
</script>

</body>
</html>
