<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>í•™êµ í–‰ì‚¬ ìº˜ë¦°ë”</title>
<style>
body {
  font-family: Arial, sans-serif;
  padding: 20px;
  background: #f5f7fb;
}

a {
  text-decoration: none;
  color: #4a5bdc;
  font-weight: 600;
  display: inline-block;
  margin-bottom: 15px;
}

h2 {
  margin-bottom: 10px;
  color: #333;
}

/* ì›” ë„¤ë¹„ê²Œì´ì…˜ */
.month-nav {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 20px;
  margin: 20px 0;
  padding: 15px;
  background: white;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}

.month-nav button {
  padding: 8px 16px;
  background: #4a5bdc;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 18px;
  font-weight: bold;
  transition: all 0.3s;
}

.month-nav button:hover {
  background: #3849c7;
  transform: scale(1.1);
}

.month-nav .current-month {
  font-size: 24px;
  font-weight: bold;
  color: #4a5bdc;
  min-width: 200px;
  text-align: center;
}

/* ì…ë ¥ ì˜ì—­ */
.control {
  margin: 20px 0;
  display: flex;
  gap: 10px;
  align-items: center;
  padding: 15px;
  background: white;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}

.control input {
  padding: 10px;
  border: 2px solid #e0e4ff;
  border-radius: 8px;
  font-size: 14px;
}

.control input:focus {
  outline: none;
  border-color: #4a5bdc;
}

.control input[type="date"] {
  width: 150px;
}

.control input[type="text"] {
  flex: 1;
  max-width: 300px;
}

.control button {
  padding: 10px 24px;
  background: #4a5bdc;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s;
}

.control button:hover {
  background: #3849c7;
  transform: scale(1.05);
}

/* ìº˜ë¦°ë” ê·¸ë¦¬ë“œ */
.calendar {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 3px;
  margin-top: 20px;
  max-width: 900px;
  background: white;
  padding: 15px;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}

/* ìš”ì¼ í—¤ë” */
.head {
  background: #4a5bdc;
  color: white;
  text-align: center;
  padding: 12px 0;
  font-weight: bold;
  font-size: 14px;
  border-radius: 5px;
}

/* ë‚ ì§œ ì¹¸ */
.day {
  border: 1px solid #e0e4ff;
  min-height: 100px;
  padding: 8px;
  box-sizing: border-box;
  background: white;
  border-radius: 5px;
  transition: all 0.2s;
}

.day:hover {
  background: #f8f9fa;
  transform: scale(1.02);
}

/* ë‚ ì§œ ìˆ«ì */
.day-number {
  font-weight: bold;
  margin-bottom: 5px;
  color: #333;
  font-size: 16px;
}

/* í–‰ì‚¬ í•­ëª© */
.event {
  background: #e3f2fd;
  margin-top: 3px;
  padding: 4px 6px;
  font-size: 12px;
  border-radius: 4px;
  border-left: 3px solid #4a5bdc;
  word-break: break-word;
  cursor: pointer;
  transition: all 0.2s;
}

.event:hover {
  background: #bbdefb;
  transform: translateX(2px);
}

/* ì˜¤ëŠ˜ ë‚ ì§œ ê°•ì¡° */
.today {
  border: 2px solid #ff5252;
  background: #fff5f5;
}

.today .day-number {
  color: #ff5252;
}
</style>
</head>
<body>

<h2>ğŸ“… í•™êµ í–‰ì‚¬ ìº˜ë¦°ë”</h2>
<a href="index.html">â† í™ˆìœ¼ë¡œ</a>

<!-- ì›” ë„¤ë¹„ê²Œì´ì…˜ -->
<div class="month-nav">
  <button onclick="changeMonth(-1)">â—€</button>
  <div class="current-month" id="currentMonth"></div>
  <button onclick="changeMonth(1)">â–¶</button>
</div>

<!-- í–‰ì‚¬ ì¶”ê°€ ì…ë ¥ ì˜ì—­ -->
<div class="control">
  <input type="date" id="eventDate">
  <input type="text" id="eventText" placeholder="í–‰ì‚¬ ë‚´ìš© ì…ë ¥">
  <button onclick="addEvent()">ì¶”ê°€</button>
</div>

<!-- ìº˜ë¦°ë” ê·¸ë¦¬ë“œ -->
<div class="calendar" id="calendar"></div>

<script>
/* === ì „ì—­ ë³€ìˆ˜ === */
const calendar = document.getElementById('calendar');
const currentMonthDiv = document.getElementById('currentMonth');
let currentYear = new Date().getFullYear(); // í˜„ì¬ ì—°ë„
let currentMonth = new Date().getMonth(); // í˜„ì¬ ì›” (0~11)

// ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì—ì„œ í–‰ì‚¬ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
let events = JSON.parse(localStorage.getItem("calendarEvents") || "{}");

/* === ë‚ ì§œ í¬ë§· í•¨ìˆ˜ === */
function formatDate(y, m, d) {
  // "2024-12-23" í˜•ì‹ìœ¼ë¡œ ë°˜í™˜
  return `${y}-${String(m).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
}

/* === ì›” ë³€ê²½ í•¨ìˆ˜ === */
function changeMonth(direction) {
  currentMonth += direction; // -1(ì´ì „ ë‹¬) ë˜ëŠ” +1(ë‹¤ìŒ ë‹¬)
  
  // ì›”ì´ 0ë³´ë‹¤ ì‘ìœ¼ë©´ ì‘ë…„ 12ì›”ë¡œ
  if (currentMonth < 0) {
    currentMonth = 11;
    currentYear--;
  }
  // ì›”ì´ 11ë³´ë‹¤ í¬ë©´ ë‚´ë…„ 1ì›”ë¡œ
  else if (currentMonth > 11) {
    currentMonth = 0;
    currentYear++;
  }
  
  drawCalendar(); // ìº˜ë¦°ë” ë‹¤ì‹œ ê·¸ë¦¬ê¸°
}

/* === í˜„ì¬ ì›” í‘œì‹œ ì—…ë°ì´íŠ¸ === */
function updateMonthDisplay() {
  const monthNames = [
    '1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”',
    '7ì›”', '8ì›”', '9ì›”', '10ì›”', '11ì›”', '12ì›”'
  ];
  
  currentMonthDiv.textContent = `${currentYear}ë…„ ${monthNames[currentMonth]}`;
}

/* === ìº˜ë¦°ë” ê·¸ë¦¬ê¸° === */
function drawCalendar() {
  // ìº˜ë¦°ë” ì´ˆê¸°í™” (ìš”ì¼ í—¤ë”ë§Œ ë‚¨ê¹€)
  calendar.innerHTML = `
    <div class="head">ì¼</div>
    <div class="head">ì›”</div>
    <div class="head">í™”</div>
    <div class="head">ìˆ˜</div>
    <div class="head">ëª©</div>
    <div class="head">ê¸ˆ</div>
    <div class="head">í† </div>
  `;
  
  // í˜„ì¬ ì›” í‘œì‹œ ì—…ë°ì´íŠ¸
  updateMonthDisplay();
  
  const firstDay = new Date(currentYear, currentMonth, 1).getDay(); // 1ì¼ì˜ ìš”ì¼
  const lastDate = new Date(currentYear, currentMonth + 1, 0).getDate(); // ë§ˆì§€ë§‰ ë‚ ì§œ
  
  // 1ì¼ ì „ê¹Œì§€ ë¹ˆ ì¹¸ ì±„ìš°ê¸°
  for(let i = 0; i < firstDay; i++) {
    const emptyDiv = document.createElement("div");
    calendar.appendChild(emptyDiv);
  }
  
  // ì˜¤ëŠ˜ ë‚ ì§œ ì •ë³´
  const today = new Date();
  const todayKey = formatDate(
    today.getFullYear(),
    today.getMonth() + 1,
    today.getDate()
  );
  
  // 1ì¼ë¶€í„° ë§ˆì§€ë§‰ ë‚ ê¹Œì§€ ë‚ ì§œ ì¹¸ ìƒì„±
  for(let d = 1; d <= lastDate; d++) {
    const dateKey = formatDate(currentYear, currentMonth + 1, d);
    const box = document.createElement("div");
    box.className = "day";
    
    // ì˜¤ëŠ˜ ë‚ ì§œë©´ ê°•ì¡°
    if (dateKey === todayKey) {
      box.classList.add("today");
    }
    
    // ë‚ ì§œ ìˆ«ì ì¶”ê°€
    const dayNumber = document.createElement("div");
    dayNumber.className = "day-number";
    dayNumber.textContent = d;
    box.appendChild(dayNumber);
    
    // í•´ë‹¹ ë‚ ì§œì— ë“±ë¡ëœ í–‰ì‚¬ê°€ ìˆìœ¼ë©´ í‘œì‹œ
    if(events[dateKey]) {
      events[dateKey].forEach(e => {
        const eventDiv = document.createElement("div");
        eventDiv.className = "event";
        eventDiv.textContent = e;
        box.appendChild(eventDiv);
      });
    }
    
    calendar.appendChild(box);
  }
}

/* === í–‰ì‚¬ ì¶”ê°€ í•¨ìˆ˜ === */
function addEvent() {
  const date = eventDate.value; // ì„ íƒí•œ ë‚ ì§œ
  const text = eventText.value.trim(); // ì…ë ¥í•œ í–‰ì‚¬ ë‚´ìš©
  
  if(!date || !text) {
    alert("ë‚ ì§œì™€ í–‰ì‚¬ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!");
    return;
  }
  
  // í•´ë‹¹ ë‚ ì§œì— í–‰ì‚¬ ë°°ì—´ì´ ì—†ìœ¼ë©´ ìƒì„±
  if(!events[date]) events[date] = [];
  
  // í–‰ì‚¬ ì¶”ê°€
  events[date].push(text);
  
  // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
  localStorage.setItem("calendarEvents", JSON.stringify(events));
  
  // ì…ë ¥ì°½ ì´ˆê¸°í™”
  eventText.value = "";
  eventDate.value = "";
  
  alert("í–‰ì‚¬ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!");
  
  // ìº˜ë¦°ë” ë‹¤ì‹œ ê·¸ë¦¬ê¸°
  drawCalendar();
}

/* === ì´ˆê¸° ë Œë”ë§ === */
drawCalendar();
</script>

</body>
</html>
