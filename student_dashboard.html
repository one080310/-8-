<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>í•™ìƒ ê°œì¸ ìš”ì•½</title>
<style>
body { font-family:Segoe UI,sans-serif;background:#f5f7fb;padding:20px }
.card { background:white;padding:20px;border-radius:12px;margin-bottom:20px }
.good { color:#4a5bdc } .bad { color:#d9534f }
</style>
</head>
<body>

<h2>ğŸ“Š ë‚˜ì˜ í•™ìŠµ ìš”ì•½</h2>
<a href="index.html">â† í™ˆ</a>

<div class="card" id="info"></div>
<div class="card" id="study"></div>

<script>
const data=localStorage.getItem("loginUser");
if(!data){ alert("ë¡œê·¸ì¸ í•„ìš”"); location.href="index.html"; }

const user=JSON.parse(data);
if(user.role!=="student"){ alert("í•™ìƒ ì „ìš©"); location.href="index.html"; }

document.getElementById("info").innerHTML=
`${user.grade}í•™ë…„ ${user.classNum}ë°˜ ${user.number}ë²ˆ<br>í•™ë²ˆ: ${user.code}`;

const study=JSON.parse(
  localStorage.getItem("study_"+user.classNum+"ë°˜")
)||[];

const me=study[user.number-1];
if(me){
  const total=me.checks.length;
  const ok=me.checks.filter(v=>v).length;
  const p=Math.round(ok/total*100);
  document.getElementById("study").innerHTML=
    `<h3>ììŠµ ì°¸ì„ë¥ </h3>
     <p class="${p>=70?'good':'bad'}">${p}%</p>`;
}else{
  document.getElementById("study").innerText="ììŠµ ë°ì´í„° ì—†ìŒ";
}
</script>
</body>
</html>
