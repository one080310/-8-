<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ë°˜ë³„ íˆ¬ë‘ë¦¬ìŠ¤íŠ¸</title>
<style>
body {
  font-family:'Segoe UI', sans-serif;
  background:#f5f7fb;
  padding:20px;
}

h2 { margin-bottom:8px; }

a {
  text-decoration:none;
  color:#4a5bdc;
  font-weight:600;
}

/* ë‚ ì§œ ì„ íƒ ì˜ì—­ */
.date-bar {
  display:flex;
  align-items:center;
  gap:15px;
  margin:15px 0;
}

.date-bar button {
  padding:8px 16px;
  font-size:18px;
  border:none;
  background:#4a5bdc;
  color:white;
  border-radius:8px;
  cursor:pointer;
  font-weight:bold;
}

.date-bar button:hover {
  background:#3849c7;
}

.date-bar strong {
  font-size:20px;
  color:#333;
  min-width:120px;
  text-align:center;
}

/* ë°˜ ì„ íƒ ë²„íŠ¼ */
.class-buttons button {
  margin:4px;
  padding:6px 14px;
  border:none;
  border-radius:20px;
  background:#e0e4ff;
  cursor:pointer;
  font-weight:600;
}

.class-buttons button.active {
  background:#4a5bdc;
  color:white;
}

/* í•™ìƒ ì¹´ë“œ */
.student {
  background:white;
  border-radius:10px;
  padding:12px;
  margin-bottom:12px;
  box-shadow:0 4px 10px rgba(0,0,0,0.06);
}

.student h3 {
  color:#4a5bdc;
  margin-bottom:8px;
}

/* í•  ì¼ í•­ëª© */
.task {
  display:flex;
  align-items:center;
  gap:6px;
  margin:4px 0;
}

.task.done span {
  text-decoration:line-through;
  opacity:0.6;
}

.task button {
  background:#ff6b6b;
  border:none;
  color:white;
  padding:2px 6px;
  border-radius:4px;
  cursor:pointer;
  font-size:12px;
}

.task button:hover {
  background:#ff5252;
}

/* í•  ì¼ ì¶”ê°€ ì˜ì—­ */
.add-task {
  margin-top:8px;
  display:flex;
  gap:5px;
}

.add-task input {
  flex:1;
  padding:6px;
  border:1px solid #ddd;
  border-radius:5px;
}

.add-task button {
  padding:6px 12px;
  background:#4a5bdc;
  color:white;
  border:none;
  border-radius:5px;
  cursor:pointer;
}

.add-task button:hover {
  background:#3849c7;
}
</style>
</head>
<body>

<h2>ğŸ“ ë°˜ë³„ íˆ¬ë‘ë¦¬ìŠ¤íŠ¸</h2>
<a href="index.html">â† í™ˆìœ¼ë¡œ</a>

<!-- ë‚ ì§œ ì„ íƒ -->
<div class="date-bar">
  <button onclick="changeDate(-1)">â—€</button>
  <strong id="dateText"></strong>
  <button onclick="changeDate(1)">â–¶</button>
</div>

<!-- ë°˜ ì„ íƒ -->
<div class="class-buttons" id="classButtons"></div>

<!-- í•™ìƒ ëª©ë¡ -->
<div id="studentArea"></div>

<script>
/* === ì „ì—­ ë³€ìˆ˜ === */
let currentClass="1ë°˜"; // í˜„ì¬ ì„ íƒëœ ë°˜
let currentDate=new Date(); // í˜„ì¬ ë‚ ì§œ ê°ì²´

const studentArea=document.getElementById("studentArea");
const dateText=document.getElementById("dateText");

/* === ë‚ ì§œ í¬ë§· í•¨ìˆ˜ === */
function formatDate(d){
  const year = d.getFullYear(); // ì—°ë„
  const month = String(d.getMonth()+1).padStart(2,'0'); // ì›” (0ë¶€í„° ì‹œì‘í•˜ë¯€ë¡œ +1)
  const day = String(d.getDate()).padStart(2,'0'); // ì¼
  return `${year}-${month}-${day}`; // "2024-12-23" í˜•ì‹
}

/* === ë‚ ì§œ í‘œì‹œ í•¨ìˆ˜ === */
function showDate(){
  const month = currentDate.getMonth()+1; // ì›” (1~12)
  const day = currentDate.getDate(); // ì¼ (1~31)
  dateText.innerText = `${month}ì›” ${day}ì¼`; // "12ì›” 23ì¼" í˜•ì‹
}

/* === ë‚ ì§œ ë³€ê²½ í•¨ìˆ˜ === */
function changeDate(diff){
  currentDate.setDate(currentDate.getDate() + diff); // ë‚ ì§œì— diffë§Œí¼ ë”í•˜ê±°ë‚˜ ë¹¼ê¸° (-1: ì „ë‚ , +1: ë‹¤ìŒë‚ )
  showDate(); // ë‚ ì§œ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
  render(); // í™”ë©´ ë‹¤ì‹œ ê·¸ë¦¬ê¸°
}

/* === ë°˜ ë²„íŠ¼ ìƒì„± (1~7ë°˜) === */
for(let i=1;i<=7;i++){
  const btn=document.createElement("button");
  btn.innerText=i+"ë°˜";
  if(i===1) btn.classList.add("active"); // 1ë°˜ ê¸°ë³¸ ì„ íƒ
  btn.onclick=()=>{
    document.querySelectorAll(".class-buttons button")
      .forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    currentClass=i+"ë°˜";
    render();
  };
  classButtons.appendChild(btn);
}

/* === ë¡œì»¬ìŠ¤í† ë¦¬ì§€ í‚¤ ìƒì„± === */
function key(){
  return `todo_${currentClass}_${formatDate(currentDate)}`; // ì˜ˆ: "todo_1ë°˜_2024-12-23"
}

/* === ë°ì´í„° ê°€ì ¸ì˜¤ê¸° === */
function getData(){
  let data=JSON.parse(localStorage.getItem(key()));
  if(!data){ // ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ì´ˆê¸°í™”
    data=[];
    for(let i=1;i<=24;i++){ // 1~24ë²ˆ í•™ìƒ
      data.push({number:i, tasks:[]}); // ë²ˆí˜¸ì™€ ë¹ˆ í•  ì¼ ëª©ë¡
    }
    saveData(data);
  }
  return data;
}

/* === ë°ì´í„° ì €ì¥ === */
function saveData(d){
  localStorage.setItem(key(),JSON.stringify(d));
}

/* === í•  ì¼ ì¶”ê°€ === */
function addTask(sIndex,input){
  if(!input.value.trim()) return; // ë¹ˆ ì…ë ¥ ë¬´ì‹œ
  const d=getData();
  d[sIndex].tasks.push({text:input.value, done:false}); // ìƒˆ í•  ì¼ ì¶”ê°€
  saveData(d);
  input.value = ""; // ì…ë ¥ì°½ ë¹„ìš°ê¸°
  render();
}

/* === ì™„ë£Œ í† ê¸€ === */
function toggle(s,t){
  const d=getData();
  d[s].tasks[t].done=!d[s].tasks[t].done; // ì™„ë£Œ ìƒíƒœ ë°˜ì „
  saveData(d);
  render();
}

/* === í•  ì¼ ì‚­ì œ === */
function removeTask(s,t){
  const d=getData();
  d[s].tasks.splice(t,1); // í•´ë‹¹ í•  ì¼ ì‚­ì œ
  saveData(d);
  render();
}

/* === í™”ë©´ ë Œë”ë§ === */
function render(){
  const d=getData();
  studentArea.innerHTML="";

  d.forEach((stu,s)=>{
    const box=document.createElement("div");
    box.className="student";
    box.innerHTML=`<h3>${stu.number}ë²ˆ</h3>`;

    // í•  ì¼ ëª©ë¡ í‘œì‹œ
    stu.tasks.forEach((task,t)=>{
      const taskDiv = document.createElement("div");
      taskDiv.className = `task ${task.done?"done":""}`;
      
      const checkbox = document.createElement("input");
      checkbox.type = "checkbox";
      checkbox.checked = task.done;
      checkbox.onclick = ()=>toggle(s,t);
      
      const span = document.createElement("span");
      span.textContent = task.text;
      
      const btn = document.createElement("button");
      btn.textContent = "X";
      btn.onclick = ()=>removeTask(s,t);
      
      taskDiv.appendChild(checkbox);
      taskDiv.appendChild(span);
      taskDiv.appendChild(btn);
      box.appendChild(taskDiv);
    });

    // í•  ì¼ ì¶”ê°€ ì…ë ¥ì°½
    const addDiv = document.createElement("div");
    addDiv.className = "add-task";
    
    const input = document.createElement("input");
    input.placeholder = "í•  ì¼ ì¶”ê°€";
    input.onkeydown = (e)=>{
      if(e.key==="Enter") addTask(s, input);
    };
    
    const addBtn = document.createElement("button");
    addBtn.textContent = "ì¶”ê°€";
    addBtn.onclick = ()=>addTask(s, input);
    
    addDiv.appendChild(input);
    addDiv.appendChild(addBtn);
    box.appendChild(addDiv);
    
    studentArea.appendChild(box);
  });
}

showDate(); // ì´ˆê¸° ë‚ ì§œ í‘œì‹œ
render(); // ì´ˆê¸° ë Œë”ë§
</script>

</body>
</html>
