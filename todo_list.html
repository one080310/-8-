<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ë°˜ë³„ íˆ¬ë‘ë¦¬ìŠ¤íŠ¸</title>
<style>
body {
  font-family:'Segoe UI', sans-serif;
  background:#f5f7fb;
  padding:20px;
}

h2 { margin-bottom:6px; }

a {
  text-decoration:none;
  color:#4a5bdc;
  font-weight:600;
}

.class-buttons button {
  margin:4px;
  padding:6px 14px;
  border:none;
  border-radius:20px;
  background:#e0e4ff;
  cursor:pointer;
  font-weight:600;
}

.class-buttons button.active {
  background:#4a5bdc;
  color:white;
}

.student {
  background:white;
  border-radius:10px;
  padding:12px;
  margin-bottom:10px;
  box-shadow:0 4px 10px rgba(0,0,0,0.06);
}

.student h3 {
  margin:0 0 6px 0;
}

.task {
  display:flex;
  align-items:center;
  margin:4px 0;
}

.task input[type="text"] {
  flex:1;
  padding:4px;
}

.task input[type="checkbox"] {
  margin-left:8px;
}

.add-task {
  margin-top:6px;
}

.add-task input {
  width:70%;
  padding:4px;
}
</style>
</head>
<body>

<h2>ğŸ“ ë°˜ë³„ íˆ¬ë‘ë¦¬ìŠ¤íŠ¸</h2>
<a href="index.html">â† í™ˆìœ¼ë¡œ</a>

<!-- ë°˜ ì„ íƒ -->
<div class="class-buttons" id="classButtons"></div>

<!-- í•™ìƒ ì˜ì—­ -->
<div id="studentArea"></div>

<script>
let currentClass = "1ë°˜";
const studentArea = document.getElementById("studentArea");
const classButtons = document.getElementById("classButtons");

/* ë°˜ ë²„íŠ¼ */
for(let i=1;i<=7;i++){
  const btn=document.createElement("button");
  btn.innerText=i+"ë°˜";
  if(i===1) btn.classList.add("active");
  btn.onclick=()=>switchClass(i+"ë°˜",btn);
  classButtons.appendChild(btn);
}

function switchClass(cls, btn){
  currentClass=cls;
  document.querySelectorAll(".class-buttons button")
    .forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  render();
}

/* ë°ì´í„° */
function getData(){
  let data = JSON.parse(localStorage.getItem("todo_"+currentClass));
  if(!data){
    data=[];
    for(let i=1;i<=24;i++){
      data.push({
        number:i,
        tasks:[]
      });
    }
    saveData(data);
  }
  return data;
}

function saveData(data){
  localStorage.setItem("todo_"+currentClass, JSON.stringify(data));
}

/* í•  ì¼ ì¶”ê°€ */
function addTask(studentIndex, input){
  if(!input.value) return;

  const data=getData();
  data[studentIndex].tasks.push({
    text: input.value,
    done:false
  });
  saveData(data);
  render();
}

/* ì²´í¬ */
function toggleDone(sIndex, tIndex){
  const data=getData();
  data[sIndex].tasks[tIndex].done =
    !data[sIndex].tasks[tIndex].done;
  saveData(data);
}

/* ë Œë” */
function render(){
  const data=getData();
  studentArea.innerHTML="";

  data.forEach((student, sIndex)=>{
    const div=document.createElement("div");
    div.className="student";
    div.innerHTML=`<h3>${student.number}ë²ˆ</h3>`;

    student.tasks.forEach((task,tIndex)=>{
      div.innerHTML+=`
        <div class="task">
          <input type="text" value="${task.text}" readonly>
          <input type="checkbox"
            ${task.done?"checked":""}
            onclick="toggleDone(${sIndex},${tIndex})">
        </div>`;
    });

    div.innerHTML+=`
      <div class="add-task">
        <input placeholder="í•  ì¼ ì¶”ê°€"
          onkeydown="if(event.key==='Enter') addTask(${sIndex}, this)">
        <button onclick="addTask(${sIndex}, this.previousElementSibling)">ì¶”ê°€</button>
      </div>
    `;

    studentArea.appendChild(div);
  });
}

render();
</script>

</body>
</html>
