<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ë°˜ë³„ íˆ¬ë‘ë¦¬ìŠ¤íŠ¸</title>
<style>
body {
  font-family: 'Segoe UI', sans-serif;
  background:#f5f7fb;
  padding:20px;
}

h2 {
  margin-bottom:10px;
}

a {
  text-decoration:none;
  color:#4a5bdc;
  font-weight:600;
}

.class-buttons {
  margin: 15px 0;
}

.class-buttons button {
  margin:5px;
  padding:8px 16px;
  border:none;
  border-radius:20px;
  background:#e0e4ff;
  cursor:pointer;
  font-weight:600;
}

.class-buttons button.active {
  background:#4a5bdc;
  color:white;
}

.input-box {
  margin-bottom:20px;
}

.input-box input {
  padding:8px;
  margin-right:5px;
}

.card {
  background:white;
  padding:15px;
  border-radius:10px;
  margin-bottom:10px;
}
</style>
</head>
<body>

<h2>ğŸ“ ë°˜ë³„ í•™ìƒ íˆ¬ë‘ë¦¬ìŠ¤íŠ¸</h2>
<a href="index.html">â† í™ˆìœ¼ë¡œ</a>

<!-- ë°˜ ì„ íƒ ë²„íŠ¼ -->
<div class="class-buttons" id="classButtons"></div>

<!-- ì…ë ¥ ì˜ì—­ -->
<div class="input-box">
  <input id="studentName" placeholder="í•™ìƒ ì´ë¦„">
  <input id="taskInput" placeholder="í•  ì¼">
  <button onclick="addTodo()">ì¶”ê°€</button>
</div>

<!-- íˆ¬ë‘ ëª©ë¡ -->
<div id="todoList"></div>

<script>
/* ===== ì „ì—­ ë³€ìˆ˜ ===== */
let currentClass = "1ë°˜";
const classButtons = document.getElementById("classButtons");
const todoList = document.getElementById("todoList");
const studentNameInput = document.getElementById("studentName");
const taskInput = document.getElementById("taskInput");

/* ===== ë°˜ ë²„íŠ¼ ìƒì„± (1~7ë°˜) ===== */
for (let i = 1; i <= 7; i++) {
  const btn = document.createElement("button");
  btn.innerText = i + "ë°˜";
  if (i === 1) btn.classList.add("active");

  btn.onclick = () => switchClass(i + "ë°˜", btn);
  classButtons.appendChild(btn);
}

/* ===== ë°˜ ì „í™˜ ===== */
function switchClass(cls, btn) {
  currentClass = cls;

  document
    .querySelectorAll(".class-buttons button")
    .forEach(b => b.classList.remove("active"));

  btn.classList.add("active");
  render();
}

/* ===== ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ===== */
function getData() {
  return JSON.parse(localStorage.getItem("todo_" + currentClass) || "[]");
}

/* ===== ë°ì´í„° ì €ì¥ ===== */
function saveData(data) {
  localStorage.setItem("todo_" + currentClass, JSON.stringify(data));
}

/* ===== í™”ë©´ ì¶œë ¥ ===== */
function render() {
  const data = getData();
  todoList.innerHTML = "";

  data.forEach((item, index) => {
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
      <strong>${item.name}</strong><br>
      <label>
        <input type="checkbox" ${item.done ? "checked" : ""}
          onchange="toggleDone(${index})">
        ${item.task}
      </label>
    `;
    todoList.appendChild(div);
  });
}

/* ===== íˆ¬ë‘ ì¶”ê°€ ===== */
function addTodo() {
  if (!studentNameInput.value || !taskInput.value) return;

  const data = getData();
  data.push({
    name: studentNameInput.value,
    task: taskInput.value,
    done: false
  });

  saveData(data);
  studentNameInput.value = "";
  taskInput.value = "";
  render();
}

/* ===== ì™„ë£Œ ì²´í¬ ===== */
function toggleDone(index) {
  const data = getData();
  data[index].done = !data[index].done;
  saveData(data);
}

/* ===== ìµœì´ˆ ë Œë” ===== */
render();
</script>

</body>
</html>
