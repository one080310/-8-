<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ê³¼ì œ ê³µì§€</title>
<link rel="stylesheet" href="./common.css">
<style>
.notice {
  background:white;
  padding:15px;
  border-radius:10px;
  margin-bottom:15px;
}

button {
  padding:6px 14px;
  border:none;
  border-radius:6px;
  background:#4a5bdc;
  color:white;
  font-weight:600;
}

button:disabled {
  background:#ccc;
}
</style>
</head>
<body>

<h2>ğŸ“¢ ê³¼ì œ ê³µì§€</h2>
<a href="index.html">â† í™ˆ</a>

<div id="workArea"></div>

<script>
const LOGIN_KEY="login_student";

const works=[
  {
    id:"math",
    title:"ìˆ˜í•™ ìˆ˜í–‰í‰ê°€",
    content:"í•¨ìˆ˜ ë‹¨ì› ë¬¸ì œ í’€ì´",
    deadline:"2025-12-25"
  },
  {
    id:"science",
    title:"ê³¼í•™ ìê¸°í‰ê°€ì„œ",
    content:"í•™ê¸° ìê¸°í‰ê°€ ì‘ì„±",
    deadline:"2025-12-27"
  }
];

function render(){
  const user=localStorage.getItem(LOGIN_KEY);
  if(!user){
    alert("ë¡œê·¸ì¸ í•„ìš”");
    location.href="index.html";
    return;
  }

  const area=document.getElementById("workArea");
  area.innerHTML="";

  works.forEach(w=>{
    const key="submit_"+w.id;
    let list=JSON.parse(localStorage.getItem(key))||[];
    const today=new Date().toISOString().slice(0,10);
    const closed=today>w.deadline;

    const submitted=list.includes(user);

    area.innerHTML+=`
      <div class="notice">
        <h3>${w.title}</h3>
        <p>${w.content}</p>
        <p>ë§ˆê°: ${w.deadline}</p>
        <p>ì œì¶œ í˜„í™©: ${list.length}/24</p>

        <button 
          onclick="submit('${w.id}')"
          ${submitted||closed?"disabled":""}>
          ${closed?"ë§ˆê°ë¨":submitted?"ì œì¶œ ì™„ë£Œ":"ì œì¶œ"}
        </button>

        <details>
          <summary>ì œì¶œì ë³´ê¸° (ì„ ìƒë‹˜)</summary>
          ${list.map(n=>n+"ë²ˆ").join(", ")||"ì—†ìŒ"}
        </details>
      </div>
    `;
  });
}

function submit(id){
  const user=localStorage.getItem(LOGIN_KEY);
  const key="submit_"+id;
  let list=JSON.parse(localStorage.getItem(key))||[];

  if(!list.includes(user)){
    list.push(user);
    localStorage.setItem(key,JSON.stringify(list));
    render();
  }
}

render();
</script>

</body>
</html>
