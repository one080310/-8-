<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ììŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸</title>

<style>
body {
  font-family: 'Segoe UI', sans-serif;
  background: #f5f7fb;
  padding: 20px;
}

h2 { margin-bottom: 10px; }

a {
  text-decoration: none;
  color: #4a5bdc;
  font-weight: 600;
  display: inline-block;
  margin-bottom: 20px;
}

.class-buttons { margin: 20px 0; }

.class-buttons button {
  margin: 4px;
  padding: 8px 16px;
  border: none;
  border-radius: 20px;
  background: #e0e4ff;
  cursor: pointer;
  font-weight: 600;
}

.class-buttons button.active {
  background: #4a5bdc;
  color: white;
}

table {
  width: 100%;
  border-collapse: collapse;
  background: white;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}

thead {
  background: #4a5bdc;
  color: white;
}

th, td {
  padding: 10px;
  text-align: center;
  border: 1px solid #e0e4ff;
  font-size: 13px;
}

tbody tr:nth-child(even) { background: #f8f9fa; }
tbody tr:hover { background: #e8ecff; }

input[type="checkbox"] {
  width: 18px;
  height: 18px;
  accent-color: #4a5bdc;
}

td:first-child {
  font-weight: 600;
  color: #4a5bdc;
  background: #f0f2ff;
}
</style>
</head>

<body>

<h2>ğŸ“˜ ììŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>
<a href="index.html">â† í™ˆìœ¼ë¡œ</a>

<div class="class-buttons" id="classButtons"></div>
<!-- í†µê³„ ì˜ì—­ -->
<div id="stats" style="
  background:white;
  padding:15px;
  border-radius:12px;
  box-shadow:0 4px 10px rgba(0,0,0,0.08);
  margin-bottom:20px;
  font-size:14px;
"></div>

<table>
<thead>
<tr>
  <th rowspan="2">ë²ˆí˜¸</th>
  <th colspan="15">ììŠµ ì²´í¬</th>
</tr>
<tr>
  <th>ì›” 8êµì‹œ</th><th>ì›” ì•¼ì 1êµì‹œ</th><th>ì›” ì•¼ì 2êµì‹œ</th>
  <th>í™” 8êµì‹œ</th><th>í™” ì•¼ì 1êµì‹œ</th><th>í™” ì•¼ì 2êµì‹œ</th>
  <th>ìˆ˜ 8êµì‹œ</th><th>ìˆ˜ ì•¼ì 1êµì‹œ</th><th>ìˆ˜ ì•¼ì 2êµì‹œ</th>
  <th>ëª© 8êµì‹œ</th><th>ëª© ì•¼ì 1êµì‹œ</th><th>ëª© ì•¼ì 2êµì‹œ</th>
  <th>ê¸ˆ 8êµì‹œ</th><th>ê¸ˆ ì•¼ì 1êµì‹œ</th><th>ê¸ˆ ì•¼ì 2êµì‹œ</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>

<script>
let currentClass = "1ë°˜";
const tableBody = document.getElementById("tableBody");
const classButtons = document.getElementById("classButtons");

/* ë°˜ ë²„íŠ¼ */
for(let i=1;i<=7;i++){
  const btn=document.createElement("button");
  btn.innerText=i+"ë°˜";
  if(i===1) btn.classList.add("active");
  btn.onclick=()=>switchClass(i+"ë°˜",btn);
  classButtons.appendChild(btn);
}

  function switchClass(cls,btn){
  currentClass=cls;
  document.querySelectorAll(".class-buttons button")
    .forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  render();
}

function getData(){
  let data=JSON.parse(localStorage.getItem("study_"+currentClass));
  if(!data){
    data=[];
    for(let i=1;i<=24;i++){
      data.push({ number:i, checks:Array(15).fill(false) });
    }
    localStorage.setItem("study_"+currentClass,JSON.stringify(data));
  }
  return data;
}

function toggleCheck(s,c){
  const data=getData();
  data[s].checks[c]=!data[s].checks[c];
  localStorage.setItem("study_"+currentClass,JSON.stringify(data));
}

function render(){
  const data=getData();
  tableBody.innerHTML="";
  data.forEach((stu,s)=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`<td>${stu.number}</td>`;
    stu.checks.forEach((chk,c)=>{
      const td=document.createElement("td");
      const cb=document.createElement("input");
      cb.type="checkbox";
      cb.checked=chk;
      cb.onchange=()=>toggleCheck(s,c);
      td.appendChild(cb);
      tr.appendChild(td);
    });
    tableBody.appendChild(tr);
  });
}
function renderStats(){
  const data = getData();
  const statsDiv = document.getElementById("stats");

  const totalStudents = 24;
  const totalSlots = 15;
  let checkedTotal = 0;

  // ìš”ì¼Â·êµì‹œë³„ ì¹´ìš´íŠ¸
  const slotCount = Array(15).fill(0);

  data.forEach(stu=>{
    stu.checks.forEach((chk,i)=>{
      if(chk){
        checkedTotal++;
        slotCount[i]++;
      }
    });
  });

  const maxChecks = totalStudents * totalSlots;
  const percent = Math.round((checkedTotal / maxChecks) * 100);

  const labels = [
    "ì›” 8êµì‹œ","ì›” ì•¼ì1","ì›” ì•¼ì2",
    "í™” 8êµì‹œ","í™” ì•¼ì1","í™” ì•¼ì2",
    "ìˆ˜ 8êµì‹œ","ìˆ˜ ì•¼ì1","ìˆ˜ ì•¼ì2",
    "ëª© 8êµì‹œ","ëª© ì•¼ì1","ëª© ì•¼ì2",
    "ê¸ˆ 8êµì‹œ","ê¸ˆ ì•¼ì1","ê¸ˆ ì•¼ì2"
  ];

  let html = `
    <strong>ğŸ“Š ${currentClass} ììŠµ í†µê³„</strong><br>
    ì „ì²´ ë‹¬ì„±ë¥ : <strong>${percent}%</strong>
    (${checkedTotal}/${maxChecks})<br><br>
  `;

  labels.forEach((label,i)=>{
    html += `${label}: ${slotCount[i]} / 24ëª…<br>`;
  });

  statsDiv.innerHTML = html;
}

render();
</script>

</body>
</html>
